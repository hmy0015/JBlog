<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="post">
    <!-- 최상단 카테고리 내 최근 게시글의 포스트 넘버 (블로그 메인에서 사용) -->
	<select id="getMaxPostNo" parameterType="String" resultType="map">
		<![CDATA[
			select max(postno) as post_no
			from post p, ( select max(cateNo) as cateno
			                from category
			                where id = #{id}) cn
			where p.cateno = cn.cateno
		]]>
	</select>
	
	<!-- 해당 카테고리 내 게시글 목록 (블로그 메인 4번에서 사용) -->
	<select id="getPostList" parameterType="int" resultType="com.javaex.vo.PostVo">
		<![CDATA[
			select p.postno,
			        p.cateno,
			        p.posttitle,
			        p.postcontent,
			        p.regdate 
			from post p
			where p.cateno = #{cateNo}
		]]>
	</select>
	
	<!-- 해당 카테고리 내 게시글 정보 (블로그 메인 5번에서 사용) -->
	<select id="getPostInfo" parameterType="int" resultType="com.javaex.vo.PostVo">
		<![CDATA[
			select p.postno,
			        p.cateno,
			        p.posttitle,
			        p.postcontent,
			        p.regdate 
			from post p
			where p.postno = #{postNo}
		]]>
	</select>
	
</mapper>

